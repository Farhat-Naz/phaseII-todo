# Backend Environment Variables
# Copy this file to .env and fill in your actual values

# ============================================
# Database Configuration (Neon PostgreSQL)
# ============================================

# Neon PostgreSQL connection string
# Format: postgresql://user:password@host.neon.tech/dbname?sslmode=require
# Get this from your Neon dashboard: https://console.neon.tech/
DATABASE_URL=postgresql://user:password@ep-xxx-xxx.us-east-2.aws.neon.tech/neondb?sslmode=require

# ============================================
# Application Settings
# ============================================

# Environment: development, staging, production
ENV=development

# Debug mode (True for development, False for production)
DEBUG=True

# API host and port
HOST=0.0.0.0
PORT=8000

# ============================================
# JWT Authentication
# ============================================

# Secret key for JWT token signing (generate with: openssl rand -hex 32)
SECRET_KEY=your-secret-key-here-generate-a-secure-random-string

# Separate secret key for refresh tokens (generate with: openssl rand -hex 32)
# MUST be different from SECRET_KEY for security
REFRESH_TOKEN_SECRET=your-refresh-token-secret-here-generate-different-from-secret-key

# JWT algorithm
ALGORITHM=HS256

# Access token expiration time (in minutes)
# Recommended: 15-30 minutes for security
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Refresh token expiration time (in days)
# Recommended: 7-30 days for user experience
REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================
# Email Configuration
# ============================================

# Email provider: "sendgrid" or "aws_ses"
EMAIL_PROVIDER=sendgrid

# SendGrid Configuration (if using SendGrid)
# Get API key from: https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=your-sendgrid-api-key-here

# AWS SES Configuration (if using AWS SES)
# Get credentials from AWS IAM: https://console.aws.amazon.com/iam/
AWS_SES_REGION=us-east-1
AWS_SES_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SES_SECRET_ACCESS_KEY=your-aws-secret-access-key

# Email sender configuration
# This email MUST be verified in SendGrid or AWS SES
EMAIL_FROM_ADDRESS=noreply@yourdomain.com
EMAIL_FROM_NAME=TodoApp

# Frontend URL for email links (password reset, email verification)
# Development: http://localhost:3000
# Production: https://yourdomain.com
FRONTEND_URL=http://localhost:3000

# ============================================
# CORS Settings
# ============================================

# Allowed origins for CORS (comma-separated)
# For development, use http://localhost:3000
# For production, use your frontend domain
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# Allow credentials (cookies, authorization headers)
CORS_ALLOW_CREDENTIALS=True

# ============================================
# Security Headers
# ============================================

# Content Security Policy
CSP_ENABLED=True

# HTTPS redirect (True for production)
HTTPS_REDIRECT=False

# ============================================
# Logging
# ============================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format: json, text
LOG_FORMAT=text

# ============================================
# Rate Limiting
# ============================================

# Requests per minute per IP
RATE_LIMIT_PER_MINUTE=60

# Login attempts per 15 minutes per IP
LOGIN_RATE_LIMIT_ATTEMPTS=5
LOGIN_RATE_LIMIT_WINDOW=900

# Registration attempts per hour per IP
REGISTER_RATE_LIMIT_ATTEMPTS=3
REGISTER_RATE_LIMIT_WINDOW=3600

# Password reset attempts per hour per email
PASSWORD_RESET_RATE_LIMIT_ATTEMPTS=3
PASSWORD_RESET_RATE_LIMIT_WINDOW=3600

# Email verification resend attempts per hour per user
EMAIL_VERIFICATION_RATE_LIMIT_ATTEMPTS=3
EMAIL_VERIFICATION_RATE_LIMIT_WINDOW=3600

# ============================================
# Testing
# ============================================

# Test database URL (optional, for integration tests)
TEST_DATABASE_URL=postgresql://user:password@localhost/test_db
